@page "/ferieboliger/{Id:int}"

@using Ferieboliger.BLL.Services;

@inject IFerieboligService ferieboligService;

<MudText>
    <h3>@adresse.Vej</h3>
</MudText>

<MudGrid>
    <MudItem xs="3" Class="d-flex flex-column feriebolig__priser">
        <MudCard>
            Pris - højsæson: <br />
            @feriebolig.PrisHoej
        </MudCard>
        <MudCard>
            Pris - lavsæson: <br />
            @feriebolig.PrisLav
        </MudCard>
    </MudItem>
    <MudItem xs="3" Class="d-flex flex-column feriebolig__priser">
        <MudCard>
            Beskatning - højsæson: <br />
            @feriebolig.BeskatningHoej
        </MudCard>
        <MudCard>
            Beskatning - lavsæson: <br />
            @feriebolig.BeskatningLav
        </MudCard>
    </MudItem>
</MudGrid>

<MudText>
    <h4>Beskrivelse</h4>
    <MudIconButton OnClick="OpenDialog" Icon="@Icons.Material.Filled.Edit" Variant="Variant.Filled" Color="Color.Primary" Size="Size.Small" Class="ma-2" />
    @feriebolig.Beskrivelse
</MudText>

<MudDialog @bind-IsVisible="visible" Options="dialogOptions">
    <TitleContent>
        <MudText Typo="Typo.h6">
            <MudIcon Icon="@Icons.Material.Filled.Edit" Class="mr-3" /> Rediger beskrivelse
        </MudText>
    </TitleContent>
    <DialogContent>
        <MudTextField @bind-Value="@feriebolig.Beskrivelse" Class="mt-3" />
    </DialogContent>
    <DialogActions>
        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="Submit" Class="px-10">Gem</MudButton>
    </DialogActions>
</MudDialog>

<MudText>
    <h4>Bemærkninger</h4>
    @feriebolig.Bemaerkninger
</MudText>

@code {
    [Parameter]
    public int Id { get; set; }

    Feriebolig feriebolig = new Feriebolig();
    Adresse adresse = new Adresse();

    protected override async Task OnInitializedAsync()
    {
        feriebolig = await ferieboligService.GetFerieboligByIdAsync(Id);
        adresse = feriebolig.Adresse;
    }

    private bool visible;
    private int rating;
    private void OpenDialog() => visible = true;
    void Submit() => visible = false;

    private DialogOptions dialogOptions = new() { FullWidth = true };
}
