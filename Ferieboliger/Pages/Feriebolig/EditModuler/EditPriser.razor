@inject Ferieboliger.BLL.Services.IFerieboligService ferieboligService

    <MudCard Elevation="0" Class="d-flex align-center">
        <p class="feriebolig__overskrift">Priser</p>

        <MudIconButton OnClick="OpenDialog" Icon="@Icons.Material.Filled.Edit" Size="Size.Small" Class="ma-2" />
    </MudCard>

    <MudCard Elevation="0" Class="d-flex flex-column feriebolig__priser">
        <MudCard Elevation="0" Class="d-flex feriebolig__priser">
            <MudCard Class="feriebolig__specifikkePriser">
                <span class="pa-4 feriebolig__specifikkePriser--prisHoejUge">
                    Højsæson Uge <br />
                </span>
                <span>
                    @Model.PrisHoejUge DKK
                </span>
                <span class="feriebolig__priser--beskat">
                    @Model.BeskatningHoejUge
                </span>
            </MudCard>
            <MudCard Class=" feriebolig__specifikkePriser ">
                <span class="pa-4 feriebolig__specifikkePriser--prisHoejWeekend">
                    Højsæson Weekend <br />
                </span>
                @Model.PrisHoejWeekend DKK
                <span class="feriebolig__priser--beskat">
                    @Model.BeskatningHoejWeekend
                </span>
            </MudCard>
        </MudCard>
        <MudCard Elevation="0" Class="d-flex feriebolig__priser">
            <MudCard Class="feriebolig__specifikkePriser ">
                <span class="pa-4 feriebolig__specifikkePriser--prisLavUge">
                    Lavsæson Uge: <br />
                </span>
                @Model.PrisLavUge DKK
                <span class="feriebolig__priser--beskat">
                    @Model.BeskatningLavUge
                </span>
            </MudCard>
            <MudCard Class="feriebolig__specifikkePriser ">
                <span class="pa-4 feriebolig__specifikkePriser--prisLavWeekend">
                    Lavsæson Weekend <br />
                </span>
                @Model.PrisLavWeekend DKK
                <span class="feriebolig__priser--beskat">
                    @Model.BeskatningLavWeekend
                </span>
            </MudCard>
        </MudCard>
    </MudCard>

    <MudDialog @bind-IsVisible="visible" Options="dialogOptions">
        <TitleContent>
            <MudText Typo="Typo.h6">
                <MudIcon Icon="@Icons.Material.Filled.Edit" Class="mr-3" /> Rediger @Overskrift.ToLower()
            </MudText>
        </TitleContent>
        <DialogContent>
            <MudCard Elevation="0" Class="d-flex tilfoejFeriebolig__fieldset">
                <MudField Label="Højsæson Uge" Variant="Variant.Outlined">
                    <MudNumericField @bind-Value="Model.PrisHoejUge" Label="Højsæson (uge)" Variant="Variant.Text" Adornment="Adornment.End" AdornmentText="DKK" HideSpinButtons="true" />
                    <MudNumericField @bind-Value="Model.BeskatningHoejUge" Label="Beskatning - højsæson (uge)" Variant="Variant.Text" Adornment="Adornment.End" AdornmentText="DKK" HideSpinButtons="true" />
                </MudField>
            </MudCard>
            <MudCard Elevation="0" Class="d-flex tilfoejFeriebolig__fieldset">
                <MudNumericField @bind-Value="Model.PrisLavUge" Label="Lavsæson (uge)" Variant="Variant.Text" Adornment="Adornment.End" AdornmentText="DKK" HideSpinButtons="true" />
                <MudNumericField @bind-Value="Model.BeskatningLavUge" Label="Beskatning - lavsæson (uge)" Variant="Variant.Text" Adornment="Adornment.End" AdornmentText="DKK" HideSpinButtons="true" />
            </MudCard>

            <MudCard Elevation="0" Class="d-flex tilfoejFeriebolig__fieldset">
                <MudNumericField @bind-Value="Model.PrisHoejWeekend" Label="Højsæson (weekend)" Variant="Variant.Text" Adornment="Adornment.End" AdornmentText="DKK" HideSpinButtons="true" />
                <MudNumericField @bind-Value="Model.BeskatningHoejWeekend" Label="Beskatning - højsæson (weekend)" Variant="Variant.Text" Adornment="Adornment.End" AdornmentText="DKK" HideSpinButtons="true" />
            </MudCard>
            <MudCard Elevation="0" Class="d-flex tilfoejFeriebolig__fieldset">
                <MudNumericField @bind-Value="Model.PrisLavWeekend" Label="Lavsæson (weekend)" Variant="Variant.Text" Adornment="Adornment.End" AdornmentText="DKK" HideSpinButtons="true" />
                <MudNumericField @bind-Value="Model.BeskatningLavWeekend" Label="Beskatning - lavsæson (weekend)" Variant="Variant.Text" Adornment="Adornment.End" AdornmentText="DKK" HideSpinButtons="true" />
            </MudCard>
        </DialogContent>
        <DialogActions>
            <MudButton OnClick="Fortryd" Variant="Variant.Filled" Class="px-10">Fortryd</MudButton>
            <MudButton OnClick="GemFeriebolig" Variant="Variant.Filled" Color="Color.Primary" Class="px-10">Gem</MudButton>
        </DialogActions>
    </MudDialog>



    @code {
        [Parameter]
        public string Overskrift { get; set; }

        [Parameter]
        public Feriebolig Model { get; set; }


        private DialogOptions dialogOptions = new() { FullWidth = true };

        private bool visible;

        private void OpenDialog()
        {
            visible = true;
        }

        public void Fortryd()
        {
            ferieboligService.ResetContextState();
            visible = false;
        }


        public async Task GemFeriebolig()
        {
            await ferieboligService.UpdateFeriebolig();
            visible = false;
        }
    }
